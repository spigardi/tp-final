
<a routerLink="/viajes/agregar">nuevo</a>

<h2>Viajes</h2>

<table mat-table [dataSource]="viajes" class="mat-elevation-z8">
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> ID </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.id}} </td>
  </ng-container>
  <ng-container matColumnDef="origen">
    <th mat-header-cell *matHeaderCellDef> Origen </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.origen}} </td>
  </ng-container>
  <ng-container matColumnDef="destino">
    <th mat-header-cell *matHeaderCellDef> Destino </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.destino}} </td>
  </ng-container>
  <ng-container matColumnDef="fecha">
    <th mat-header-cell *matHeaderCellDef> Fecha </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.fecha}} </td>
  </ng-container>
  <ng-container matColumnDef="hora">
    <th mat-header-cell *matHeaderCellDef> Hora </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.hora}} </td>
  </ng-container>
  <ng-container matColumnDef="lugarSalida">
    <th mat-header-cell *matHeaderCellDef> Lugar de Salida </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.lugarSalida}} </td>
  </ng-container>
  <ng-container matColumnDef="lugarDestino">
    <th mat-header-cell *matHeaderCellDef> Lugar de Destino </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.lugarDestino}} </td>
  </ng-container>
  <ng-container matColumnDef="horaSalidaEstimada">
    <th mat-header-cell *matHeaderCellDef> hora de salida estimada </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.horaSalidaEstimada}} </td>
  </ng-container>
  <ng-container matColumnDef="horaLlegadaEstimada">
    <th mat-header-cell *matHeaderCellDef> hora llegada estimada </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.horaLlegadaEstimada}} </td>
  </ng-container>
  <ng-container matColumnDef="colectivo">
    <th mat-header-cell *matHeaderCellDef> colectivo </th>
    <td mat-cell *matCellDef="let viaje"> {{viaje.colectivo}} </td>
  </ng-container>
  <ng-container matColumnDef="pasajeros">
    <th mat-header-cell *matHeaderCellDef> pasajeros </th>
    <td mat-cell *matCellDef="let viaje"> 
      {{viaje.pasajeros.length}}
      <a (click)="verPasajeros(viaje.id)">
        <mat-icon>create</mat-icon>
      </a>
    </td>
  </ng-container>
  <!-- Columna Accion -->
  <ng-container matColumnDef="accion">
    <th mat-header-cell *matHeaderCellDef> Accion </th>
    <td mat-cell *matCellDef="let viaje"> 
      <a [routerLink]="'/viajes/editar/' + viaje.id">
        <mat-icon>create</mat-icon>
      </a>
      <a (click)="borrarViaje(viaje.id)">
        <mat-icon>delete</mat-icon>
      </a>
    </td>
  </ng-container>
  <!-- DefiniciÃ³n de las columnas de la tabla -->
  <tr mat-header-row *matHeaderRowDef="['id', 'origen', 'destino', 'fecha','hora','lugarSalida','lugarDestino','horaSalidaEstimada','horaLlegadaEstimada','colectivo','pasajeros', 'accion']"></tr>
  <tr mat-row *matRowDef="let row; columns: ['id', 'origen', 'destino', 'fecha','hora','lugarSalida','lugarDestino','horaSalidaEstimada','horaLlegadaEstimada','colectivo','pasajeros','accion']"></tr>
  </table>
  <!-- Popup de listado de pasajeros -->
  <div class="popup" *ngIf="showPopup">
    <app-pasajeros [viaje]="selectedViaje" (actualizar)="loadTable()"></app-pasajeros>
    <button class="close-btn" (click)="cerrarPopup()">X</button>
      
  </div>